author: LiveCodeBench Pro Team
author_email: shz060@ucsd.edu
difficulty: medium
instruction: "LiveCodeBench Pro (Mini) - external judge.\n\nThe agent must create\
  \ a C++17 solution file at /app/main.cpp.\nThis task does not include local test\
  \ cases. Instead, the test harness:\n  1) POSTs the code to the external judge (/submit)\
  \ to get a sid,\n  2) polls GET /result/{sid}?short=1 until status == \"done\",\n\
  \  3) passes only if the judge returns passed == true.\n\nEnvironment variables\
  \ (overridable at runtime):\n  - BASE_URL: judge base URL (default http://38.80.122.117:8081)\n\
  \  - PID: problem id (default 2004F)\n  - LANG: language (default cpp)\n  - CODE_PATH:\
  \ path to code (default /app/main.cpp)\n  - JUDGE_TIMEOUT_SECS: poll timeout seconds\
  \ (default 120)\n\nYou are given an array $a$ consisting of $n$ integers.\n\nLet\
  \ the function $f(b)$ return the minimum number of operations needed to make an\
  \ array $b$ a palindrome. The operations you can make are:\n\n- choose two adjacent\
  \ elements $b_i$ and $b_{i+1}$, remove them, and replace them with a single element\
  \ equal to $(b_i + b_{i + 1})$;\n- or choose an element $b_i > 1$, remove it, and\
  \ replace it with two positive integers $x$ and $y$ ($x > 0$ and $y > 0$) such that\
  \ $x + y = b_i$.\n\nFor example, from an array $b=[2, 1, 3]$, you can obtain the\
  \ following arrays in one operation: $[1, 1, 1, 3]$, $[2, 1, 1, 2]$, $[3, 3]$, $[2,\
  \ 4]$, or $[2, 1, 2, 1]$.\n\nCalculate $\\displaystyle \\left(\\sum_{1 \\le l \\\
  le r \\le n}{f(a[l..r])}\\right)$, where $a[l..r]$ is the subarray of $a$ from index\
  \ $l$ to index $r$, inclusive. In other words, find the sum of the values of the\
  \ function $f$ for all subarrays of the array $a$.\n\n### Input\n\nThe first line\
  \ contains a single integer $t$ ($1 \\le t \\le 1000$) -- the number of test cases.\n\
  \nThe first line of each test case contains a single integer $n$ ($1 \\le n \\le\
  \ 2000$).\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\\
  le a_i \\le 10^5$).\n\nAdditional constraint on the input: the sum of $n$ over all\
  \ test cases does not exceed $2000$.\n\n### Output\n\nFor each test case, print\
  \ a single integer -- the sum of the values of the function $f$ for all subarrays\
  \ of the array $a$.\n\n### Example\n\n#### Input #1\n\n```\n\n4\n\n3\n\n2 1 3\n\n\
  4\n\n1 1 1 1\n\n5\n\n4 2 3 1 5\n\n4\n\n1 2 1 2\n\n```\n\n#### Output #1\n\n```\n\
  3\n0\n14\n5\n```"
max_agent_timeout_sec: 300
max_test_timeout_sec: 180
tags: []
